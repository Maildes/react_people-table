(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{26:function(e,t,a){e.exports=a(45)},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),s=a(6),o=a(1),u=function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav__list"},r.a.createElement("li",{className:"nav__item"},r.a.createElement(s.c,{to:"/",exact:!0,className:"nav__link",activeClassName:"nav__link--active"},"Home")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(s.c,{to:"/people",className:"nav__link",activeClassName:"nav__link--active"},"People"))))},m=a(15),i=a(14),p=a(24),f=a.n(p),h=a(13),E=a.n(h),d=a(25),v=function(){var e=Object(d.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=a(9),g=a.n(b),_=function(e){var t=e.name,a=e.slug,n=e.sex;return r.a.createElement(s.b,{className:g()("".concat(a),{person__male:"m"===n},{person__female:"f"===n}),to:"/people/".concat(a)},t)},N=function(e){var t=e.person,a=t.id,n=t.name,c=t.sex,l=t.born,s=t.died,u=t.motherName,m=t.fatherName,i=t.mother,p=t.father,f=t.slug,h=Object(o.g)(),E=Object(o.i)().personSlug;return r.a.createElement("tr",{key:a,className:g()("person",{"person--active":t.slug===E}),onClick:function(){return e=t.slug,void h.push({pathname:"/people/".concat(e)});var e}},r.a.createElement("th",null,a),r.a.createElement("th",null,r.a.createElement(_,{sex:c,name:n,slug:f})),r.a.createElement("th",{className:g()({person__male:"m"===t.sex,person__female:"f"===t.sex})},c),r.a.createElement("th",null,l),r.a.createElement("th",null,s),r.a.createElement("th",{className:"person__female"},i?r.a.createElement(_,{sex:"f",name:u,slug:i.slug}):r.a.createElement("span",null,u)),r.a.createElement("th",{className:"person__male"},p?r.a.createElement(_,{sex:"m",name:m,slug:p.slug}):r.a.createElement("span",null,m)))},O=function(){var e=Object(o.h)(),t=Object(o.g)(),a=new URLSearchParams(e.search),c=Object(n.useMemo)((function(){return a.get("query")||""}),[a]),l=Object(n.useMemo)((function(){return a.get("sortBy")||""}),[a]),s=Object(n.useMemo)((function(){return a.get("sortOrder")}),[a]||!1),u=Object(n.useState)([]),p=Object(i.a)(u,2),h=p[0],E=p[1],d=Object(n.useState)(c),b=Object(i.a)(d,2),g=b[0],_=b[1];Object(n.useEffect)((function(){v().then((function(e){return E(e.map((function(t,a){var n=e.find((function(e){return e.name===t.motherName})),r=e.find((function(e){return e.name===t.fatherName}));return Object(m.a)(Object(m.a)({},t),{},{id:a+1,motherSlug:(null===n||void 0===n?void 0:n.slug)||t.motherName,fatherSlug:(null===r||void 0===r?void 0:r.slug)||t.fatherName})})))}))}),[]);var O=Object(n.useMemo)((function(){return function(e,t){var a=new RegExp(t,"i");return e.filter((function(e){return a.test(e.name+e.motherName+e.fatherName)}))}(h,c)}),[c,h]);Object(n.useMemo)((function(){switch(l){case"id":case"born":case"died":return O.sort((function(e,t){return e[l]-t[l]}));case"name":case"sex":return O.sort((function(e,t){return e[l].localeCompare(t[l])}));default:return O}}),[O,l,s]);Object(n.useMemo)((function(){return"desc"===s?O.reverse():O}),[O,s]);var j=Object(n.useCallback)(f()(t.push,500),[]);return Object(n.useEffect)((function(){_(c)}),[c]),r.a.createElement("div",{className:"container"},r.a.createElement("input",{className:"table__search",placeholder:"Find person",type:"text",value:g,onChange:function(e){_(e.target.value),a.set("query",e.target.value),j({search:a.toString()})}}),r.a.createElement("table",{className:"PeopleTable people"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"people__header"},["id","name","sex","born","died","mother","father"].map((function(e){return r.a.createElement("th",{key:e,onClick:function(){var n;"mother"!==(n=e)&&"father"!==n&&(l===n&&"asc"===s?a.set("sortOrder","desc"):a.set("sortOrder","asc"),a.set("sortBy",n),t.push({search:a.toString()}))}},e,"asc"===s&&e===l&&r.a.createElement("img",{className:"sortFlag",src:"./images/sort-down.svg",alt:"sort_icon"}),"desc"===s&&e.toLowerCase()===l&&r.a.createElement("img",{className:"sortFlag",src:"./images/sort-up.svg",alt:"sort_icon"}))})))),r.a.createElement("tbody",null,O.map((function(e){return r.a.createElement(N,{person:e,key:e.slug})})))))},j=(a(44),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,render:function(){return r.a.createElement("h1",null,"Home")}}),r.a.createElement(o.b,{path:"/people/:personSlug?",component:O}),r.a.createElement(o.a,{from:"/home",to:"/"}),r.a.createElement(o.b,null,r.a.createElement("h1",null,"Page not found"))))});l.a.render(r.a.createElement(s.a,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.f47a86df.chunk.js.map